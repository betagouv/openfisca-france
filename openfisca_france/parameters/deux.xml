<NODE code="deux" description="Terrain de jeu">
<!-- In this new experimental param file, everything is flat. The only nodes are BAREME and CODE (one can design new ones).

The difficulty is to express everything in this flat world...
Global idea : the hierarchy can be reproduced from the info contained in formulas.

-->



  <!-- CASE OF BAREMES
  This BAREME used to be in root.cotsoc.pat.commun.construction_node.construction_20 (because it is valid only for effectif > 20)

  The preprocessing.py would move it to commun.construction.
  And would add it as part of "commun" to pat.cadre, pat.noncadre, pat.fonc.contract...
  but then remove it from contract, and remove it from "commun" to add "commun" to "fonc.etat" and "fonc.colloc"

  This introduced a long lasting bug : the formula forgot about this effectif condition (it lost the "20" information in preprocessing).
  In cotisations_sociales/base.py, "type_sal" will be computed and the effort_construction bareme will be added when pat.X contains it.

  So the param.xml hierarchy, *modified* by preprocessing.py, determines what type_sal will pay the effort_construction cotisation.
  Better explicit this very important information somewhere else, right ?

  Where ?
  - in the param node - if it needs to be precise (e.g. involving dates, or bareme tranches)
  - in the formula - in the most common case

  -->
  <!-- use the variable="variable_name" attribute to link the node directly to the variable where it is used -->
  <BAREME variable="participation_effort_construction" description="Participation à l'effort de construction">
    <TRANCHE>
      <SEUIL>
        <VALUE deb="1992-01-01" fuzzy="true" valeur="0" />
      </SEUIL>
      <!-- input variables can be used as conditions in XML node attributes -->
      <TAUX>
        <VAR  condition="effectif_entreprise >= 20">
          <VALUE deb="2015-01-01" fuzzy="true" valeur="0.0045" />
          <VALUE deb="1992-01-01" fin="2014-12-31" valeur="0.0045" />
        </VAR>
        <VAR  condition="10 <= effectif_entreprise < 20">
          <VALUE deb="2005-08-01" fuzzy="true" valeur="0" />
          <VALUE deb="1992-01-01" fin="2005-07-31" valeur="0.0045" />
        </VAR>
      </TAUX>
      <!-- Implicit: for conditions not matched (< 10), return the value 0 -->
    </TRANCHE>
  </BAREME>

  <!-- CASE OF CODES

  AGIRC GMP : params.cotsoc.agirc_gmp
  Simplified : there has been way more than 2 year changes
  -->

  <CODE variable="agirc_gmp_salarie" description="Garantie minimale de points AGIRC employeur">
    <VALUE deb="2017-01-01" fuzzy="true" valeur="42.23" />
    <VALUE deb="2016-01-01" fin="2016-12-31" valeur="42.23" />
    <VALUE deb="2014-01-01" fin="2015-12-31" valeur="41.17" />
  </CODE>
  <CODE variable="agirc_gmp_employee" description="Garantie minimale de points AGIRC salarié">
    <VALUE deb="2017-01-01" fuzzy="true" valeur="25.84" />
    <VALUE deb="2016-01-01" fin="2016-12-31" valeur="25.84" />
    <VALUE deb="2014-01-01" fin="2015-12-31" valeur="25.17" />
  </CODE>

  <CODE code="agirc_gmp_assiette" description="Salaire charnière annuel">
    <VALUE deb="2017-01-01" fuzzy="true" valeur="42590.88" />
    <VALUE deb="2016-01-01" fin="2016-12-31" valeur="42590.88" />
    <VALUE deb="2015-01-01" fin="2015-12-31" valeur="41913.84" />
    <VALUE deb="2014-01-01" fin="2014-12-31" valeur="41444.64" />
  </CODE>


  <!-- CONDITIONNAL CODES -->
  <!-- The hierarchy for exo_bas_sal > ... fillon > ... is lost : it doesn't belong in the param files  -->

  <CODE code="fillon_seuil_salaire" description="Point de sortie (en smic)" format="percent">
    <VALUE deb="2017-01-01" fuzzy="true" valeur="1.6" />
    <VALUE deb="2005-07-01" fin="2016-12-31" valeur="1.6" />
  </CODE>
  <CODE code="fillon_taux_max" description="Taux maximum" format="percent">
    <VAR condition="effectif_entreprise >= 20">
      <VALUE deb="2018-01-01" fuzzy="true" valeur=".2850" />
      <VALUE deb="2017-01-01" fin="2017-12-31" valeur=".2850" />
      <VALUE deb="2016-01-01" fin="2016-12-31" valeur=".2842" />
      <VALUE deb="2015-01-01" fin="2015-12-31" valeur=".2835" />
      <VALUE deb="2005-07-01" fin="2014-12-31" valeur=".26" />
    </VAR>
    <VAR condition="effectif_entreprise < 20">
      <VALUE deb="2018-01-01" fuzzy="true" valeur=".2810" />
      <VALUE deb="2017-01-01" fin="2017-12-31" valeur=".2810" />
      <VALUE deb="2016-01-01" fin="2016-12-31" valeur=".2802" />
      <VALUE deb="2015-01-01" fin="2015-12-31" valeur=".2795" />
      <VALUE deb="2007-07-01" fin="2014-12-31" valeur=".281" />
      <VALUE deb="2005-07-01" fin="2007-06-30" valeur=".26" />
    </VAR>
  </CODE>


<!-- Deux variables !! -->

<CODE code="contribution_supplementaire_apprentissage" description="Contribution supplémentaire d'apprentissage">
  <VAR condition="pourcentage_alternants < 1">
    <VAR condition="effectif_entreprise > 2000">
      <VALUE deb="2016-01-01" fuzzy="true" valeur=".006" />
      <VALUE deb="2014-01-01" fin="2015-12-31" valeur=".006" />
      <VALUE deb="2013-01-01" fin="2013-12-31" valeur=".005" />
    </VAR>
    <VAR condition="effectif_entreprise <= 2000">
      <VALUE deb="2016-01-01" fuzzy="true" valeur=".006" />
      <VALUE deb="2014-01-01" fin="2015-12-31" valeur=".006" />
      <VALUE deb="2013-01-01" fin="2013-12-31" valeur=".005" />
    </VAR>
  </VAR>
  <VAR condition="1 <= pourcentage_alternants < 2">
    <VALUE deb="2016-01-01" fuzzy="true" valeur=".002" />
    <VALUE deb="2015-01-01" fin="2015-12-31" valeur=".002" />
    <VALUE deb="2013-01-01" fin="2014-12-31" valeur=".001" />
  </VAR>
  <VAR condition="2 <= pourcentage_alternants < 3">
    <VALUE deb="2016-01-01" fuzzy="true" valeur=".002" />
    <VALUE deb="2015-01-01" fin="2015-12-31" valeur=".002" />
    <VALUE deb="2013-01-01" fin="2014-12-31" valeur=".001" />
  </VAR>
  <!-- ETC -->
</NODE>

<!-- CICE, FILLON, ALLGMT COT ALLOC FAM
BAREME with SEUIL ON SALARY ? -->

<!-- Cas incertains

- <NODE code="assiette" description="Paramètres régissant l'assiette des cotisations sociales">

 -->
